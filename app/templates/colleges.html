{% extends "base.html" %}
{% block content %}
    <!-- Colleges -->
    <div class="w3-container w3-padding-32" id="contact">
        <h3 class="w3-border-bottom w3-border-light-grey w3-padding-16">Fill in the details.</h3>
        <form method="POST" action="/colleges/add">
            <input type="hidden" name="csrf_token" value="{{csrf_token()}}">
            <input class="w3-input w3-border" type="text" name="collegecode" id="collegecode" placeholder="College Code" required>
            <input class="w3-input w3-section w3-border" type="text" name="collegename" id="collegename" placeholder="College Name" required>
            <button class="w3-button w3-black w3-section" type="submit">
                <i class="fa fa-paper-plane"></i> ADD COLLEGE
            </button>
        </form>
    </div>


    <!-- Colleges Section -->
    <div class="w3-container w3-padding-32" id="colleges">
        <h3 class="w3-border-bottom w3-border-light-grey w3-padding-16">College Information</h3>


<!-- Search Bar -->
<form method="POST" action="/colleges/search">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <div class="input-group mb-3">
        <input class="w3-input w3-border w3-section" type="text" placeholder="Search for a college" id="search_college" name="search_college">
        <div class="input-group-append">
        <button class="w3-button w3-black" type="submit">
          <i class="fa fa-search"></i> SEARCH
        </button>
      </div>
    </div>
  </form>
        
                <!-- College Table -->
                <table class="w3-table w3-striped">
                    <tr>
                        <th>College Code</th>
                        <th>College Name</th>
                        <th>Actions</th>
                    </tr>
                    {% for college in colleges %}
                        <tr>
                            <td> {{ college.collegecode }}</td>
                            <td> {{ college.collegename }}</td>
                            <td>
                                <button type="button" id="editCollege_{{ college.collegecode }}" onclick="editCollege('{{ college.collegecode }}', '{{ college.collegename }}')"><i class="fa fa-edit fa-lg" title="Edit"></i></button>

                                <button type="button" id="deleteCollege" college-code="{{college.collegecode}}" csrf-token="{{csrf_token()}}" onclick="deleteCollege(this)"><i class="fa fa-trash fa-lg" title="Delete"></i></button>
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            </div>

  <!-- Edit College Form (Hidden by default) -->
  <div class="w3-container w3-padding-32" id="edit_college_form" style="display: none;">
    <h3 class="w3-border-bottom w3-border-light-grey w3-padding-16">Edit College Information</h3>
    <form method="POST" action="/colleges/edit" id="editCollegeForm">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <input type="hidden" name="college_code" id="edit_college_collegecode">
      <label for="college_name">College Name</label>
      <input class="w3-input w3-border" type="text" name="college_name" id="edit_college_collegename" placeholder="College Name" required>
      <button class="w3-button w3-black w3-section" type="submit">
        <i class="fa fa-save"></i> Save Changes
      </button>
    </form>
  </div>

  <script>
    function editCollege(collegecode, collegename) {
      document.getElementById('edit_college_collegecode').value = collegecode;
      document.getElementById('edit_college_collegename').value = collegename;
      document.getElementById('edit_college_form').style.display = 'block';
    }
  </script>
</div>

{% endblock %}

